extends ../../layouts/default.pug
//- include ../../mixins/filterStatus.pug
//- include ../../mixins/search.pug
//- include ../../mixins/pagination.pug
include ../../mixins/form-change-multi.pug
include ../../mixins/alert.pug
//- include ../../mixins/sort.pug
include ../../mixins/table-tree.pug

block main
    .col-lg-10
        .main-content#mainContent(role="main")
            +alert-success(5000)
            section#products-section.content-section
                //- .card.filter-card.mb-3
                //-     .card-header.d-flex.justify-content-between.align-items-center
                //-         h5.mb-0
                //-             i.fas.fa-filter.mr-2
                //-             | Bộ lọc & Tìm kiếm
                    //- .card-body
                    //-     .d-flex.flex-wrap.align-items-center.w-100
                    //-         //- Nhóm nút lọc trạng thái
                    //-         .btn-group.btn-group-sm(role="group" aria-label="Lọc theo trạng thái")
                    //-             +filter-status(filterStatus)

                        //- Tìm kiếm (GET). Giữ lại status hiện tại (nếu có).
                        +search(keyword)

                        +sort(sort) 
                .card
                    .card-header.d-flex.justify-content-between.align-items-center
                        h5.mb-0
                            i.fas.fa-box.mr-2
                            | #{pageTitle}
                        .d-flex.align-items-center
                            a#addBtn.btn.btn-primary.btn-glow(
                                href= `/${prefixAdmin}/products-category/create`
                            )
                                i.fas.fa-plus.mr-2
                                | Thêm danh mục

                .card
                    .card-body
                        .table-responsive
                            //- table#productsTable.table.table-hover(aria-describedby="Danh sách sản phẩm")
                            +form-change-multi(
                                `/${prefixAdmin}/products-category/change-multi?_method=PATCH`
                            )
                            table.tree-table(
                                class="table table-hover table-sm"
                                checkbox-multi
                            )
                                thead.thead-dark
                                    tr
                                        th 
                                            input(
                                                type="checkbox"
                                                name="checkall"
                                            ) 
                                        th STT
                                        th Hình ảnh
                                        th(data-sort="name" role="button" tabindex="0" aria-label="Sắp xếp theo tiêu đề")
                                            | Tiêu đề
                                            i.fas.fa-sort.ml-1
                                        th vị trí
                                        th Trạng thái
                                        th Hành động
                                tbody#productsTableBody
                                    +table-tree(records)
                        //- Pagination
                        //- +pagination(pagination)

                        form(
                            action= ""
                            method="POST"
                            id = "form-change-status"
                            data-path = `/${prefixAdmin}/products-category/change-status`
                        ) 

                        form(
                            action= ""
                            method="POST"
                            id = "form-delete-item"
                            data-path = `${prefixAdmin}/products-category/delete`
                        ) 

                script(src="/admin/js/product.js")