extends ../../layouts/default.pug
include ../../mixins/alert.pug
include ../../mixins/deny-access.pug

block main
    .col-lg-10
        .main-content#mainContent(role="main")
            +alert-error(5000)
            +alert-success(5000)

            section#product-edit.content-section
                .card.form-card
                    .card-header.d-flex.justify-content-between.align-items-center
                        h5.mb-0
                            i.fas.fa-edit.mr-2
                            | #{pageTitle}
                        a.btn.btn-outline-secondary.btn-sm(href=`/${prefixAdmin}/my-account`)
                            i.fas.fa-arrow-left.mr-1
                            | Quay lại 

                    .card-body
                        form#form-edit-product(
                            action=`/${prefixAdmin}/my-account/edit?_method=PATCH`
                            method="POST"
                            enctype="multipart/form-data"
                            novalidate
                        )
                            .form-row
                                .col-md-8
                                    .form-group
                                        label(for="fullName") Họ tên<span class="text-danger">*</span>
                                        .input-with-icon
                                            i.fas.fa-heading.input-icon
                                            input#fullName.form-control(
                                                type="text"
                                                name="fullName"
                                                required
                                                aria-required="true"
                                                placeholder="Nhập họ tên của bạn"
                                                value=authUser.fullName
                                            )
                                        .invalid-feedback Vui lòng nhập họ tên.

                                    .form-group
                                        label(for="email") Email<span class="text-danger">*</span>
                                        .input-with-icon
                                            i.fa-solid.fa-at.input-icon
                                            input#email.form-control(
                                                type="text"
                                                name="email"
                                                placeholder="Nhập email"
                                                required
                                                aria-required="true"
                                                value=authUser.email
                                            )
                                        .invalid-feedback Vui lòng nhập email.

                                    .form-group
                                        label(for="password") Mật khẩu
                                        .input-with-icon
                                            i.fa-solid.fa-key.input-icon
                                            input#password.form-control(
                                                type="text"
                                                name="password"
                                                placeholder="Nhập password"
                                                aria-required="true"
                                            )
                                        .invalid-feedback Vui lòng nhập mật khẩu.

                                    .form-group
                                        label(for="phone") Số điện thoại
                                        .input-with-icon
                                            i.fa-solid.fa-key.input-icon
                                            input#phone.form-control(
                                                type="text"
                                                name="phone"
                                                placeholder="Nhập số điện thoại"
                                                value=authUser.phone
                                            )
                            .form-row
                                .col-md-8
                                    .form-group
                                        label(for="avatar") Ảnh mới (tuỳ chọn)
                                        .custom-file
                                            input#avatar.custom-file-input(
                                                type="file"
                                                name="avatar"
                                                accept="image/*"
                                                aria-describedby="thumbHelp"
                                            )
                                            label.custom-file-label(for="avatar") Chọn ảnh mới...
                                        small#thumbHelp.form-text.text-muted
                                            | Để giữ nguyên ảnh cũ, hãy bỏ trống trường này.

                                .col-md-4
                                    // Khung xem trước ảnh hiện tại
                                    .thumb-preview-wrap
                                        .thumb-preview.preview-contain.has-image
                                            if authUser.avatar
                                                span.thumb-badge Ảnh hiện tại
                                                img#thumbPreview(src=authUser.avatar alt="Xem trước ảnh")
                                            else
                                                img#thumbPreview(src="" alt="Xem trước ảnh" aria-hidden="true")
                            // Trạng thái
                            .form-group.mt-2
                                label.d-block.mb-2 Trạng thái
                                .custom-controls-wrap
                                    .custom-control.custom-radio.custom-control-inline
                                        input#statusActive.custom-control-input(
                                            type="radio"
                                            name="status"
                                            value="active"
                                            checked=(authUser.status === "active")
                                        )
                                        label.custom-control-label(for="statusActive")
                                            i.fas.fa-check-circle.mr-1.text-success
                                            | Hoạt động
                                    .custom-control.custom-radio.custom-control-inline
                                        input#statusInActive.custom-control-input(
                                            type="radio"
                                            name="status"
                                            value="inactive"
                                            checked=(authUser.status === "inactive")
                                        )
                                        label.custom-control-label(for="statusInActive")
                                            i.fas.fa-pause-circle.mr-1.text-muted
                                            | Dừng hoạt động

                            // Actions
                            .form-actions.d-flex.justify-content-end.mt-3
                                button.btn.btn-primary.btn-glow(type="submit")
                                    i.fas.fa-save.mr-2
                                    | Cập nhật
                script(src="/admin/js/product.js")